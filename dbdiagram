Table users {
  id text [pk, not null]
  name text [not null]
  email text [not null]
  emailVerified timestamp
  image text
  created_at timestamp [not null]
  updated_at timestamp [not null]

  Note: 'ユーザー'
}

Table accounts {
  userId text [not null, ref: > users.id]
  type text [not null]
  provider text [not null]
  providerAccountId text [not null]
  refresh_token text
  access_token text
  expires_at integer
  token_type text
  scope text
  id_token text
  session_state text
  
  indexes {
    (provider, providerAccountId) [pk]
  }

    Note: 'アカウント(Auth.js用)'
}

Table brainwritings {
  id integer [pk, increment, not null]
  user_id text [not null, ref: > users.id, note: "ユーザーID"]
  usage_scope varchar [not null, note: "利用タイプ team、xpost"]
  title varchar [not null, note: "タイトル"]
  theme_name varchar [not null, note: "テーマ名"]
  description varchar [note: "説明　"]
  invite_token varchar [unique, note: "招待トークン"]
  is_invite_active boolean [not null, default: true, note: "招待URLが有効かどうか"]
  is_results_public boolean [not null, default: true, note: "結果公開が有効かどうか"]
  created_at timestamp [not null]
  updated_at timestamp [not null]

  Note: 'ブレインライティング'
}

Table brainwriting_users {
  id integer [pk, increment, not null]
  brainwriting_id integer [not null, ref: > brainwritings.id, note: "ブレインライティングID"]
  user_id text [not null, ref: > users.id, note: "ユーザーID"]
  created_at timestamp [not null]
  updated_at timestamp [not null]
  Note: 'ブレインライティングユーザー'
}

Table brainwriting_sheets {
  id integer [pk, increment, not null]
  brainwriting_id integer [not null, ref: > brainwritings.id, note: "ブレインライティングID"]
  current_user_id text [ref: > users.id, note: "現在のユーザーID"]
  lock_expires_at timestamp [note: "ロック期限(X投稿版のみ)"]
  created_at timestamp [not null]
  updated_at timestamp [not null]

  Note: 'ブレインライティングシート'
}

Table brainwriting_inputs {
  id integer [pk, increment, not null]
  brainwriting_id integer [not null, ref: > brainwritings.id, note: "ブレインライティングID"]
  brainwriting_sheet_id integer [not null, ref: > brainwriting_sheets.id, note: "ブレインライティングシートID"]
  input_user_id text [not null, ref: > users.id, note: "入力ユーザーID 利用タイプがxpostの場合はシートの持ち主と同一IDを設定"]
  row_index integer [not null, note: "行インデックス"]
  column_index integer [not null, note: "列インデックス"]
  content text [note: "入力内容"]
  created_at timestamp [not null]
  updated_at timestamp [not null]

  Note: 'ブレインライティング入力データ'
}

Table mandalarts {
  id integer [pk, increment, not null]
  user_id text [not null, ref: > users.id, note: "ユーザーID"]
  title varchar [not null, note: "タイトル"]
  theme_name varchar [not null, note: "テーマ名"]
  description varchar [note: "説明"]
  public_token varchar [unique, note: "公開トークン"]
  is_results_public boolean [not null, default: true, note: "結果公開が有効かどうか"]
  created_at timestamp [not null]
  updated_at timestamp [not null]

  Note: 'マンダラート'
}


Table mandalart_inputs {
  id integer [pk, increment, not null]
  mandalart_id integer [not null, ref: > mandalarts.id, note: "マンダラートID"]
  section_row_index integer [not null, note: "セクション行インデックス"]
  section_column_index integer [not null, note: "セクション列インデックス"]
  row_index integer [not null, note: "行インデックス"]
  column_index integer [not null, note: "列インデックス"]
  content text [note: "入力内容"]
  created_at timestamp [not null]
  updated_at timestamp [not null]

  Note: 'マンダラート入力データ'
}

Table osborn_checklists {
  id integer [pk, increment, not null]
  user_id text [not null, ref: > users.id, note: "ユーザーID"]
  title varchar(200) [not null, note: "タイトル"]
  theme_name varchar(100) [not null, note: "テーマ名"]
  description varchar(1000) [note: "説明"]
  public_token varchar [unique, note: "公開トークン"]
  is_results_public boolean [not null, default: true, note: "結果公開が有効かどうか"]
  created_at timestamp [not null, default: `now()`]
  updated_at timestamp [not null, default: `now()`]

  Note: 'オズボーンチェックリスト'
}

Table osborn_checklist_inputs {
  id integer [pk, increment, not null]
  osborn_checklist_id integer [not null, ref: > osborn_checklists.id, note: "オズボーンチェックリストID"]
  checklist_type varchar(50) [not null, note: "チェックリストタイプ transfer(転用), apply(応用), modify(変更), magnify(拡大), minify(縮小), substitute(代用), rearrange(再配置), reverse(逆転), combine(結合)"]
  content varchar(1000) [note: "入力内容"]
  created_at timestamp [not null, default: `now()`]
  updated_at timestamp [not null, default: `now()`]
  
  Note: 'オズボーンチェックリスト入力データ'
}

Table idea_categories {
  id integer [pk, increment, not null]
  user_id text [not null, ref: > users.id, note: "ユーザーID"]
  name varchar [not null, note: "カテゴリ名"]
  description text [note: "説明"]
  created_at timestamp [not null]
  updated_at timestamp [not null]

  Note: 'アイデアカテゴリ'
}

Table ideas {
  id integer [pk, increment, not null]
  idea_category_id integer [not null, ref: > idea_categories.id, note: "アイデアカテゴリID"]
  name varchar [not null, note: "アイデア名"]
  description text [note: "説明"]
  priority varchar [not null, default: "medium", note: "重要度 low, medium, high"]
  created_at timestamp [not null]
  updated_at timestamp [not null]

  Note: 'アイデア'
}

Table ai_generations {
  id integer [pk, increment, not null]
  target_type varchar(30) [not null, note: "対象タイプ osborn_checklist, mandalart"]
  target_id integer [not null, note: "対象ID"]
  generation_status varchar(20) [not null, default: "pending", note: "ステータス pending, processing, completed, failed"]
  generation_result text [note: "生成結果（JSON文字列）"]
  error_message text [note: "エラーメッセージ"]
  created_at timestamp [not null, default: `now()`]
  updated_at timestamp [not null, default: `now()`]

  Note: 'AI生成'
}
